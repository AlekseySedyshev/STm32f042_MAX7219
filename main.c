#include "stm32f0xx.h"        // Device header

// PA4 - CS, PA5 - CLK, PA7 - MOSI

#define CS()				GPIOA->BSRR |=1<<4; GPIOA->BRR |=1<<4
#define CS_L()			GPIOA->BRR |=1<<4
#define CS_H()			GPIOA->BSRR |=1<<4

#define QNT									15	//Quantity of LED Segments
typedef enum {
  REG_NO_OP  = 0x00,
  DIG0       = 0x01,
  DIG1       = 0x02,
  DIG2       = 0x03,
  DIG3       = 0x04,
  DIG4       = 0x05,
  DIG5       = 0x06,
  DIG6       = 0x07,
  DIG7       = 0x08,
  REG_DECODE	   = 0x09, //0 - No decode
  REG_BRIGHT     = 0x0A,	// 0x00 - Min, 0x0F - Max 
  REG_SCAN	     = 0x0B,	//0x00...0x07 - 0x07
  REG_SHUTDOWN   = 0x0C, // 0 - shutdown, 1 - normal
  REG_TEST  		 = 0x0F,
	OFF						= 0x00,
	ON						=	0x01,
} MAX7219_REGISTERS;

uint8_t i,tic=0,flag=0;
uint16_t counter;
uint8_t LED_BUF[121],buf;
unsigned char BUF[16];
uint16_t TimingDelay,led_count,mss;
const unsigned char font[]= 									{// Font 8*5 Vertical
0x00, 0x00, 0x00, 0x00, 0x00 ,   // sp  32
0x00, 0x00, 0x2f, 0x00, 0x00 ,   // !   33
0x00, 0x07, 0x00, 0x07, 0x00 ,   // "   34
0x14, 0x7f, 0x14, 0x7f, 0x14 ,   // #   35
0x24, 0x2a, 0x7f, 0x2a, 0x12 ,   // $   36
0xc4, 0xc8, 0x10, 0x26, 0x46 ,   // %   37
0x36, 0x49, 0x55, 0x22, 0x50 ,   // &   38
0x00, 0x05, 0x03, 0x00, 0x00 ,   // '   39
0x00, 0x1c, 0x22, 0x41, 0x00 ,   // (   40
0x00, 0x41, 0x22, 0x1c, 0x00 ,   // )   41
0x14, 0x08, 0x3E, 0x08, 0x14 ,   // *   42
0x08, 0x08, 0x3E, 0x08, 0x08 ,   // +   43
0x00, 0x00, 0x50, 0x30, 0x00 ,   // ,   44
0x10, 0x10, 0x10, 0x10, 0x10 ,   // -   45
0x00, 0x60, 0x60, 0x00, 0x00 ,   // .   46
0x20, 0x10, 0x08, 0x04, 0x02 ,   // /   47
0x3E, 0x51, 0x49, 0x45, 0x3E ,   // 0   48
0x00, 0x42, 0x7F, 0x40, 0x00 ,   // 1   49
0x42, 0x61, 0x51, 0x49, 0x46 ,   // 2   50
0x21, 0x41, 0x45, 0x4B, 0x31 ,   // 3   51
0x18, 0x14, 0x12, 0x7F, 0x10 ,   // 4   52
0x27, 0x45, 0x45, 0x45, 0x39 ,   // 5   53
0x3C, 0x4A, 0x49, 0x49, 0x30 ,   // 6   54
0x01, 0x71, 0x09, 0x05, 0x03 ,   // 7   55
0x36, 0x49, 0x49, 0x49, 0x36 ,   // 8   56
0x06, 0x49, 0x49, 0x29, 0x1E ,   // 9   57
0x00, 0x36, 0x36, 0x00, 0x00 ,   // :   58
0x00, 0x56, 0x36, 0x00, 0x00 ,   // ;   59
0x08, 0x14, 0x22, 0x41, 0x00 ,   // <   60
0x14, 0x14, 0x14, 0x14, 0x14 ,   // =   61
0x00, 0x41, 0x22, 0x14, 0x08 ,   // >   62
0x02, 0x01, 0x51, 0x09, 0x06 ,   // ?   63
0x32, 0x49, 0x59, 0x51, 0x3E ,   // @   64
0x7E, 0x11, 0x11, 0x11, 0x7E ,   // A   65
0x7F, 0x49, 0x49, 0x49, 0x36 ,   // B   66
0x3E, 0x41, 0x41, 0x41, 0x22 ,   // C   67
0x7F, 0x41, 0x41, 0x22, 0x1C ,   // D   68
0x7F, 0x49, 0x49, 0x49, 0x41 ,   // E   69
0x7F, 0x09, 0x09, 0x09, 0x01 ,   // F   70
0x3E, 0x41, 0x49, 0x49, 0x7A ,   // G   71
0x7F, 0x08, 0x08, 0x08, 0x7F ,   // H   72
0x00, 0x41, 0x7F, 0x41, 0x00 ,   // I   73
0x20, 0x40, 0x41, 0x3F, 0x01 ,   // J   74
0x7F, 0x08, 0x14, 0x22, 0x41 ,   // K   75
0x7F, 0x40, 0x40, 0x40, 0x40 ,   // L   76
0x7F, 0x02, 0x0C, 0x02, 0x7F ,   // M   77
0x7F, 0x04, 0x08, 0x10, 0x7F ,   // N   78
0x3E, 0x41, 0x41, 0x41, 0x3E ,   // O   79
0x7F, 0x09, 0x09, 0x09, 0x06 ,   // P   80
0x3E, 0x41, 0x51, 0x21, 0x5E ,   // Q   81
0x7F, 0x09, 0x19, 0x29, 0x46 ,   // R   82
0x46, 0x49, 0x49, 0x49, 0x31 ,   // S   83
0x01, 0x01, 0x7F, 0x01, 0x01 ,   // T   84
0x3F, 0x40, 0x40, 0x40, 0x3F ,   // U   85
0x1F, 0x20, 0x40, 0x20, 0x1F ,   // V   86
0x3F, 0x40, 0x38, 0x40, 0x3F ,   // W   87
0x63, 0x14, 0x08, 0x14, 0x63 ,   // X   88
0x07, 0x08, 0x70, 0x08, 0x07 ,   // Y   89
0x61, 0x51, 0x49, 0x45, 0x43 ,   // Z   90
0x00, 0x7F, 0x41, 0x41, 0x00 ,   // [   91
0x55, 0x2A, 0x55, 0x2A, 0x55 ,   // 55  92
0x00, 0x41, 0x41, 0x7F, 0x00 ,   // ]   93
0x04, 0x02, 0x01, 0x02, 0x04 ,   // ^   94
0x40, 0x40, 0x40, 0x40, 0x40 ,   // _   95
0x00, 0x01, 0x02, 0x04, 0x00 ,   // '   96
0x20, 0x54, 0x54, 0x54, 0x78 ,   // a   97
0x7F, 0x48, 0x44, 0x44, 0x38 ,   // b   98
0x38, 0x44, 0x44, 0x44, 0x20 ,   // c   99
0x38, 0x44, 0x44, 0x48, 0x7F ,   // d   100
0x38, 0x54, 0x54, 0x54, 0x18 ,   // e   101
0x08, 0x7E, 0x09, 0x01, 0x02 ,   // f   102
0x0C, 0x52, 0x52, 0x52, 0x3E ,   // g   103
0x7F, 0x08, 0x04, 0x04, 0x78 ,   // h   104
0x00, 0x44, 0x7D, 0x40, 0x00 ,   // i   105
     0x20, 0x40, 0x44, 0x3D, 0x00 ,   // j   106
     0x7F, 0x10, 0x28, 0x44, 0x00 ,   // k   107
     0x00, 0x41, 0x7F, 0x40, 0x00 ,   // l   108
     0x7C, 0x04, 0x18, 0x04, 0x78 ,   // m   109
     0x7C, 0x08, 0x04, 0x04, 0x78 ,   // n   110
     0x38, 0x44, 0x44, 0x44, 0x38 ,   // o   111
     0x7C, 0x14, 0x14, 0x14, 0x08 ,   // p   112
     0x08, 0x14, 0x14, 0x18, 0x7C ,   // q   113
     0x7C, 0x08, 0x04, 0x04, 0x08 ,   // r   114
     0x48, 0x54, 0x54, 0x54, 0x20 ,   // s   115
     0x04, 0x3F, 0x44, 0x40, 0x20 ,   // t   116
     0x3C, 0x40, 0x40, 0x20, 0x7C ,   // u   117
     0x1C, 0x20, 0x40, 0x20, 0x1C ,   // v   118
     0x3C, 0x40, 0x30, 0x40, 0x3C ,   // w   119
     0x44, 0x28, 0x10, 0x28, 0x44 ,   // x   120
     0x0C, 0x50, 0x50, 0x50, 0x3C ,   // y   121
     0x44, 0x64, 0x54, 0x4C, 0x44 ,   // z   122
    //
     0x00, 0x08, 0x36, 0x41, 0x00 ,   //7B- {
     0x00, 0x00, 0x7f, 0x00, 0x00 ,   //7C- |
     0x00, 0x41, 0x36, 0x08, 0x00 ,   //7D- }
     0x04, 0x02, 0x04, 0x08, 0x04 ,   //7E- ~
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //7F- 
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //80- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //81- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //82- ‚
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //83- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //84- „
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //85- …
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //86- †
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //87- ‡
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //88- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //89- ‰
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //8A- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //8B- ‹
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //8C- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //8D- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //8E- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //8F- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //90- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //91- ‘
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //92- ’
     0x00, 0x00, 0x00, 0x00, 0x00 ,   // 93- “
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //94- ”
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //95- •
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //96- –
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //97- —
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //98- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //99- ™ 
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //9A- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //9B- ›
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //9C- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //9D- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //9E- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //9F- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //A0-  
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //A1- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //A2- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //A3- ?
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //A4- ¤
     0x00, 0x00, 0x00, 0x00, 0x00 ,   //A5- ?
     0x00, 0x00, 0x36, 0x00, 0x00 ,   //A6- ¦
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //A7- §
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //A8- ?
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //A9- ©
 0x3E, 0x49, 0x49, 0x49, 0x22 ,   //AA- ?
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //AB- «
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //AC- ¬
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //AD- ­
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //AE- ®
 0x44, 0x45, 0x7C, 0x45, 0x44 ,   //AF- ?
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //B0- °
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //B1- ±
 0x00, 0x41, 0x7F, 0x41, 0x00 ,   //B2- ?
 0x00, 0x44, 0x7D, 0x40, 0x00 ,   //B3- ?
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //B4- ?
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //B5- µ
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //B6- ¶
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //B7- ·
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //B8- ?
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //B9- ?
 0x38, 0x54, 0x44, 0x28, 0x00 ,   //BA- ?
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //BB- »
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //BC- ?
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //BD- ?
 0x00, 0x00, 0x00, 0x00, 0x00 ,   //BE- ?
 0x4A, 0x48, 0x7A, 0x40, 0x40 ,   //BF- ?                             
    
 0x7E, 0x11, 0x11, 0x11, 0x7E , // A        /*192*/
 0x7F, 0x49, 0x49, 0x49, 0x31 , // ?
 0x7F, 0x49, 0x49, 0x49, 0x36 , // B
 0x7F, 0x01, 0x01, 0x01, 0x03 , // ?
 0x60, 0x3E, 0x21, 0x21, 0x7F , // ?
 0x7F, 0x49, 0x49, 0x49, 0x41 , // E
 0x63, 0x14, 0x7F, 0x14, 0x63 , // ?
 0x22, 0x49, 0x49, 0x49, 0x36 , // ?
 0x7F, 0x10, 0x08, 0x04, 0x7F , // ?
 0x7F, 0x10, 0x09, 0x04, 0x7F , // ?
 0x7F, 0x08, 0x14, 0x22, 0x41 , // K
 0x7C, 0x02, 0x01, 0x01, 0x7F , // ?
 0x7F, 0x02, 0x0C, 0x02, 0x7F , // M
 0x7F, 0x08, 0x08, 0x08, 0x7F , // H
 0x3E, 0x41, 0x41, 0x41, 0x3E , // O
 0x7F, 0x01, 0x01, 0x01, 0x7F , // ?
 0x7F, 0x09, 0x09, 0x09, 0x06 , // P
 0x3E, 0x41, 0x41, 0x41, 0x22 , // C
 0x01, 0x01, 0x7F, 0x01, 0x01 , // T
 0x07, 0x48, 0x48, 0x48, 0x3F , // ?
 0x1C, 0x22, 0x7F, 0x22, 0x1C , // ?
 0x63, 0x14, 0x08, 0x14, 0x63 , // X
 0x3F, 0x20, 0x20, 0x3F, 0x60 , // ?
 0x07, 0x08, 0x08, 0x08, 0x7F , // ?
 0x7F, 0x40, 0x7F, 0x40, 0x7F , // ?
 0x3F, 0x20, 0x3F, 0x20, 0x7F , // ?
 0x01, 0x7F, 0x48, 0x48, 0x30 , // ?
 0x7F, 0x48, 0x48, 0x30, 0x7F , // ?
 0x7F, 0x48, 0x48, 0x48, 0x30 , // ?
 0x22, 0x49, 0x49, 0x49, 0x3E , // ?
 0x7F, 0x08, 0x3E, 0x41, 0x3E , // ?
 0x46, 0x29, 0x19, 0x09, 0x7F , // ?
 0x20, 0x54, 0x54, 0x54, 0x78 , // a
 0x78, 0x54, 0x54, 0x54, 0x20 , // b
 0x7C, 0x54, 0x54, 0x54, 0x28 , // ?
 0x7C, 0x04, 0x04, 0x04, 0x00 , // ?
 0x60, 0x38, 0x24, 0x38, 0x60 , // ?
 0x38, 0x54, 0x54, 0x54, 0x18 , // e
 0x6C, 0x10, 0x7C, 0x10, 0x6C , // ?
 0x28, 0x44, 0x54, 0x54, 0x28 , // ?
 0x3C, 0x40, 0x40, 0x20, 0x7C , // ?
 0x3C, 0x40, 0x42, 0x20, 0x7C , // ?
 0x7C, 0x10, 0x10, 0x28, 0x44 , // ?
 0x60, 0x10, 0x08, 0x04, 0x7C , // ?
 0x7C, 0x08, 0x10, 0x08, 0x7C , // ?
 0x7C, 0x10, 0x10, 0x10, 0x7C , // ?
 0x38, 0x44, 0x44, 0x44, 0x38 , // o
 0x7C, 0x04, 0x04, 0x04, 0x7C , // ?
 0x7C, 0x14, 0x14, 0x14, 0x08 , // p
 0x38, 0x44, 0x44, 0x44, 0x20 , // c
 0x04, 0x04, 0x7C, 0x04, 0x04 , // ?
 0x0C, 0x50, 0x50, 0x50, 0x3C , // y
 0x18, 0x24, 0x7C, 0x24, 0x18 , // ?
 0x44, 0x28, 0x10, 0x28, 0x44 , // x
 0x3C, 0x20, 0x20, 0x3C, 0x60 , // ?
 0x0C, 0x10, 0x10, 0x10, 0x7C , // ?
 0x7C, 0x40, 0x7C, 0x40, 0x7C , // ?
 0x3C, 0x20, 0x3C, 0x20, 0x7C , // ?
 0x04, 0x7C, 0x48, 0x48, 0x30 , // ?
 0x7C, 0x48, 0x30, 0x00, 0x7C , // ?
 0x7C, 0x48, 0x48, 0x48, 0x30 , // ?
 0x28, 0x44, 0x54, 0x54, 0x38 , // ?
 0x7C, 0x10, 0x38, 0x44, 0x38 , // ?
 0x58, 0x24, 0x24, 0x24, 0x7C  //  ?
 };

const unsigned char font_[][8] = 							{//	Font 8*8 Vertical
  { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, // 0x00
  { 0x7E, 0x81, 0x95, 0xB1, 0xB1, 0x95, 0x81, 0x7E }, // 0x01
  { 0x7E, 0xFF, 0xEB, 0xCF, 0xCF, 0xEB, 0xFF, 0x7E }, // 0x02
  { 0x0E, 0x1F, 0x3F, 0x7E, 0x3F, 0x1F, 0x0E, 0x00 }, // 0x03
  { 0x08, 0x1C, 0x3E, 0x7F, 0x3E, 0x1C, 0x08, 0x00 }, // 0x04
  { 0x18, 0xBA, 0xFF, 0xFF, 0xFF, 0xBA, 0x18, 0x00 }, // 0x05
  { 0x10, 0xB8, 0xFC, 0xFF, 0xFC, 0xB8, 0x10, 0x00 }, // 0x06
  { 0x00, 0x00, 0x18, 0x3C, 0x3C, 0x18, 0x00, 0x00 }, // 0x07
  { 0xFF, 0xFF, 0xE7, 0xC3, 0xC3, 0xE7, 0xFF, 0xFF }, // 0x08
  { 0x00, 0x3C, 0x66, 0x42, 0x42, 0x66, 0x3C, 0x00 }, // 0x09
  { 0xFF, 0xC3, 0x99, 0xBD, 0xBD, 0x99, 0xC3, 0xFF }, // 0x0A
  { 0x70, 0xF8, 0x88, 0x88, 0xFD, 0x7F, 0x07, 0x0F }, // 0x0B
  { 0x00, 0x4E, 0x5F, 0xF1, 0xF1, 0x5F, 0x4E, 0x00 }, // 0x0C
  { 0xC0, 0xE0, 0xFF, 0x7F, 0x05, 0x05, 0x07, 0x07 }, // 0x0D
  { 0xC0, 0xFF, 0x7F, 0x05, 0x05, 0x65, 0x7F, 0x3F }, // 0x0E
  { 0x99, 0x5A, 0x3C, 0xE7, 0xE7, 0x3C, 0x5A, 0x99 }, // 0x0F
  { 0x7F, 0x3E, 0x3E, 0x1C, 0x1C, 0x08, 0x08, 0x00 }, // 0x10
  { 0x08, 0x08, 0x1C, 0x1C, 0x3E, 0x3E, 0x7F, 0x00 }, // 0x11
  { 0x00, 0x24, 0x66, 0xFF, 0xFF, 0x66, 0x24, 0x00 }, // 0x12
  { 0x00, 0x5F, 0x5F, 0x00, 0x00, 0x5F, 0x5F, 0x00 }, // 0x13
  { 0x06, 0x0F, 0x09, 0x7F, 0x7F, 0x01, 0x7F, 0x7F }, // 0x14
  { 0x40, 0xDA, 0xBF, 0xA5, 0xFD, 0x59, 0x03, 0x02 }, // 0x15
  { 0x00, 0x70, 0x70, 0x70, 0x70, 0x70, 0x70, 0x00 }, // 0x16
  { 0x80, 0x94, 0xB6, 0xFF, 0xFF, 0xB6, 0x94, 0x80 }, // 0x17
  { 0x00, 0x04, 0x06, 0x7F, 0x7F, 0x06, 0x04, 0x00 }, // 0x18
  { 0x00, 0x10, 0x30, 0x7F, 0x7F, 0x30, 0x10, 0x00 }, // 0x19
  { 0x08, 0x08, 0x08, 0x2A, 0x3E, 0x1C, 0x08, 0x00 }, // 0x1A
  { 0x08, 0x1C, 0x3E, 0x2A, 0x08, 0x08, 0x08, 0x00 }, // 0x1B
  { 0x3C, 0x3C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00 }, // 0x1C
  { 0x08, 0x1C, 0x3E, 0x08, 0x08, 0x3E, 0x1C, 0x08 }, // 0x1D
  { 0x30, 0x38, 0x3C, 0x3E, 0x3E, 0x3C, 0x38, 0x30 }, // 0x1E
  { 0x06, 0x0E, 0x1E, 0x3E, 0x3E, 0x1E, 0x0E, 0x06 }, // 0x1F
  { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, // ' '
  { 0x00, 0x06, 0x5F, 0x5F, 0x06, 0x00, 0x00, 0x00 }, // '!'
  { 0x00, 0x07, 0x07, 0x00, 0x07, 0x07, 0x00, 0x00 }, // '"'
  { 0x14, 0x7F, 0x7F, 0x14, 0x7F, 0x7F, 0x14, 0x00 }, // '#'
  { 0x24, 0x2E, 0x6B, 0x6B, 0x3A, 0x12, 0x00, 0x00 }, // '$'
  { 0x46, 0x66, 0x30, 0x18, 0x0C, 0x66, 0x62, 0x00 }, // '%'
  { 0x30, 0x7A, 0x4F, 0x5D, 0x37, 0x7A, 0x48, 0x00 }, // '&'
  { 0x04, 0x07, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00 }, // '''
  { 0x00, 0x1C, 0x3E, 0x63, 0x41, 0x00, 0x00, 0x00 }, // '('
  { 0x00, 0x41, 0x63, 0x3E, 0x1C, 0x00, 0x00, 0x00 }, // ')'
  { 0x08, 0x2A, 0x3E, 0x1C, 0x1C, 0x3E, 0x2A, 0x08 }, // '*'
  { 0x08, 0x08, 0x3E, 0x3E, 0x08, 0x08, 0x00, 0x00 }, // '+'
  { 0x00, 0x80, 0xE0, 0x60, 0x00, 0x00, 0x00, 0x00 }, // ','
  { 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x00, 0x00 }, // '-'
  { 0x00, 0x00, 0x60, 0x60, 0x00, 0x00, 0x00, 0x00 }, // '.'
  { 0x60, 0x30, 0x18, 0x0C, 0x06, 0x03, 0x01, 0x00 }, // '/'
  { 0x3E, 0x7F, 0x71, 0x59, 0x4D, 0x7F, 0x3E, 0x00 }, // '0'
  { 0x40, 0x42, 0x7F, 0x7F, 0x40, 0x40, 0x00, 0x00 }, // '1'
  { 0x62, 0x73, 0x59, 0x49, 0x6F, 0x66, 0x00, 0x00 }, // '2'
  { 0x22, 0x63, 0x49, 0x49, 0x7F, 0x36, 0x00, 0x00 }, // '3'
  { 0x18, 0x1C, 0x16, 0x53, 0x7F, 0x7F, 0x50, 0x00 }, // '4'
  { 0x27, 0x67, 0x45, 0x45, 0x7D, 0x39, 0x00, 0x00 }, // '5'
  { 0x3C, 0x7E, 0x4B, 0x49, 0x79, 0x30, 0x00, 0x00 }, // '6'
  { 0x03, 0x03, 0x71, 0x79, 0x0F, 0x07, 0x00, 0x00 }, // '7'
  { 0x36, 0x7F, 0x49, 0x49, 0x7F, 0x36, 0x00, 0x00 }, // '8'
  { 0x06, 0x4F, 0x49, 0x69, 0x3F, 0x1E, 0x00, 0x00 }, // '9'
  { 0x00, 0x00, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00 }, // ':'
  { 0x00, 0x80, 0xE6, 0x66, 0x00, 0x00, 0x00, 0x00 }, // ';'
  { 0x08, 0x1C, 0x36, 0x63, 0x41, 0x00, 0x00, 0x00 }, // '<'
  { 0x24, 0x24, 0x24, 0x24, 0x24, 0x24, 0x00, 0x00 }, // '='
  { 0x00, 0x41, 0x63, 0x36, 0x1C, 0x08, 0x00, 0x00 }, // '>'
  { 0x02, 0x03, 0x51, 0x59, 0x0F, 0x06, 0x00, 0x00 }, // '?'
  { 0x3E, 0x7F, 0x41, 0x5D, 0x5D, 0x1F, 0x1E, 0x00 }, // '@'
  { 0x7C, 0x7E, 0x13, 0x13, 0x7E, 0x7C, 0x00, 0x00 }, // 'A'
  { 0x41, 0x7F, 0x7F, 0x49, 0x49, 0x7F, 0x36, 0x00 }, // 'B'
  { 0x1C, 0x3E, 0x63, 0x41, 0x41, 0x63, 0x22, 0x00 }, // 'C'
  { 0x41, 0x7F, 0x7F, 0x41, 0x63, 0x3E, 0x1C, 0x00 }, // 'D'
  { 0x41, 0x7F, 0x7F, 0x49, 0x5D, 0x41, 0x63, 0x00 }, // 'E'
  { 0x41, 0x7F, 0x7F, 0x49, 0x1D, 0x01, 0x03, 0x00 }, // 'F'
  { 0x1C, 0x3E, 0x63, 0x41, 0x51, 0x73, 0x72, 0x00 }, // 'G'
  { 0x7F, 0x7F, 0x08, 0x08, 0x7F, 0x7F, 0x00, 0x00 }, // 'H'
  { 0x00, 0x41, 0x7F, 0x7F, 0x41, 0x00, 0x00, 0x00 }, // 'I'
  { 0x30, 0x70, 0x40, 0x41, 0x7F, 0x3F, 0x01, 0x00 }, // 'J'
  { 0x41, 0x7F, 0x7F, 0x08, 0x1C, 0x77, 0x63, 0x00 }, // 'K'
  { 0x41, 0x7F, 0x7F, 0x41, 0x40, 0x60, 0x70, 0x00 }, // 'L'
  { 0x7F, 0x7F, 0x0E, 0x1C, 0x0E, 0x7F, 0x7F, 0x00 }, // 'M'
  { 0x7F, 0x7F, 0x06, 0x0C, 0x18, 0x7F, 0x7F, 0x00 }, // 'N'
  { 0x1C, 0x3E, 0x63, 0x41, 0x63, 0x3E, 0x1C, 0x00 }, // 'O'
  { 0x41, 0x7F, 0x7F, 0x49, 0x09, 0x0F, 0x06, 0x00 }, // 'P'
  { 0x1E, 0x3F, 0x21, 0x71, 0x7F, 0x5E, 0x00, 0x00 }, // 'Q'
  { 0x41, 0x7F, 0x7F, 0x09, 0x19, 0x7F, 0x66, 0x00 }, // 'R'
  { 0x26, 0x6F, 0x4D, 0x59, 0x73, 0x32, 0x00, 0x00 }, // 'S'
  { 0x03, 0x41, 0x7F, 0x7F, 0x41, 0x03, 0x00, 0x00 }, // 'T'
  { 0x7F, 0x7F, 0x40, 0x40, 0x7F, 0x7F, 0x00, 0x00 }, // 'U'
  { 0x1F, 0x3F, 0x60, 0x60, 0x3F, 0x1F, 0x00, 0x00 }, // 'V'
  { 0x7F, 0x7F, 0x30, 0x18, 0x30, 0x7F, 0x7F, 0x00 }, // 'W'
  { 0x43, 0x67, 0x3C, 0x18, 0x3C, 0x67, 0x43, 0x00 }, // 'X'
  { 0x07, 0x4F, 0x78, 0x78, 0x4F, 0x07, 0x00, 0x00 }, // 'Y'
  { 0x47, 0x63, 0x71, 0x59, 0x4D, 0x67, 0x73, 0x00 }, // 'Z'
  { 0x00, 0x7F, 0x7F, 0x41, 0x41, 0x00, 0x00, 0x00 }, // '['
  { 0x01, 0x03, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x00 }, // backslash
  { 0x00, 0x41, 0x41, 0x7F, 0x7F, 0x00, 0x00, 0x00 }, // ']'
  { 0x08, 0x0C, 0x06, 0x03, 0x06, 0x0C, 0x08, 0x00 }, // '^'
  { 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80 }, // '_'
  { 0x00, 0x00, 0x03, 0x07, 0x04, 0x00, 0x00, 0x00 }, // '`'
  { 0x20, 0x74, 0x54, 0x54, 0x3C, 0x78, 0x40, 0x00 }, // 'a'
  { 0x41, 0x7F, 0x3F, 0x48, 0x48, 0x78, 0x30, 0x00 }, // 'b'
  { 0x38, 0x7C, 0x44, 0x44, 0x6C, 0x28, 0x00, 0x00 }, // 'c'
  { 0x30, 0x78, 0x48, 0x49, 0x3F, 0x7F, 0x40, 0x00 }, // 'd'
  { 0x38, 0x7C, 0x54, 0x54, 0x5C, 0x18, 0x00, 0x00 }, // 'e'
  { 0x48, 0x7E, 0x7F, 0x49, 0x03, 0x02, 0x00, 0x00 }, // 'f'
  { 0x98, 0xBC, 0xA4, 0xA4, 0xF8, 0x7C, 0x04, 0x00 }, // 'g'
  { 0x41, 0x7F, 0x7F, 0x08, 0x04, 0x7C, 0x78, 0x00 }, // 'h'
  { 0x00, 0x44, 0x7D, 0x7D, 0x40, 0x00, 0x00, 0x00 }, // 'i'
  { 0x60, 0xE0, 0x80, 0x80, 0xFD, 0x7D, 0x00, 0x00 }, // 'j'
  { 0x41, 0x7F, 0x7F, 0x10, 0x38, 0x6C, 0x44, 0x00 }, // 'k'
  { 0x00, 0x41, 0x7F, 0x7F, 0x40, 0x00, 0x00, 0x00 }, // 'l'
  { 0x7C, 0x7C, 0x18, 0x38, 0x1C, 0x7C, 0x78, 0x00 }, // 'm'
  { 0x7C, 0x7C, 0x04, 0x04, 0x7C, 0x78, 0x00, 0x00 }, // 'n'
  { 0x38, 0x7C, 0x44, 0x44, 0x7C, 0x38, 0x00, 0x00 }, // 'o'
  { 0x84, 0xFC, 0xF8, 0xA4, 0x24, 0x3C, 0x18, 0x00 }, // 'p'
  { 0x18, 0x3C, 0x24, 0xA4, 0xF8, 0xFC, 0x84, 0x00 }, // 'q'
  { 0x44, 0x7C, 0x78, 0x4C, 0x04, 0x1C, 0x18, 0x00 }, // 'r'
  { 0x48, 0x5C, 0x54, 0x54, 0x74, 0x24, 0x00, 0x00 }, // 's'
  { 0x00, 0x04, 0x3E, 0x7F, 0x44, 0x24, 0x00, 0x00 }, // 't'
  { 0x3C, 0x7C, 0x40, 0x40, 0x3C, 0x7C, 0x40, 0x00 }, // 'u'
  { 0x1C, 0x3C, 0x60, 0x60, 0x3C, 0x1C, 0x00, 0x00 }, // 'v'
  { 0x3C, 0x7C, 0x70, 0x38, 0x70, 0x7C, 0x3C, 0x00 }, // 'w'
  { 0x44, 0x6C, 0x38, 0x10, 0x38, 0x6C, 0x44, 0x00 }, // 'x'
  { 0x9C, 0xBC, 0xA0, 0xA0, 0xFC, 0x7C, 0x00, 0x00 }, // 'y'
  { 0x4C, 0x64, 0x74, 0x5C, 0x4C, 0x64, 0x00, 0x00 }, // 'z'
  { 0x08, 0x08, 0x3E, 0x77, 0x41, 0x41, 0x00, 0x00 }, // '{'
  { 0x00, 0x00, 0x00, 0x77, 0x77, 0x00, 0x00, 0x00 }, // '|'
  { 0x41, 0x41, 0x77, 0x3E, 0x08, 0x08, 0x00, 0x00 }, // '}'
  { 0x02, 0x03, 0x01, 0x03, 0x02, 0x03, 0x01, 0x00 }, // '~'
  { 0x70, 0x78, 0x4C, 0x46, 0x4C, 0x78, 0x70, 0x00 }, // 0x7F
  { 0x0E, 0x9F, 0x91, 0xB1, 0xFB, 0x4A, 0x00, 0x00 }, // 0x80
  { 0x3A, 0x7A, 0x40, 0x40, 0x7A, 0x7A, 0x40, 0x00 }, // 0x81
  { 0x38, 0x7C, 0x54, 0x55, 0x5D, 0x19, 0x00, 0x00 }, // 0x82
  { 0x02, 0x23, 0x75, 0x55, 0x55, 0x7D, 0x7B, 0x42 }, // 0x83
  { 0x21, 0x75, 0x54, 0x54, 0x7D, 0x79, 0x40, 0x00 }, // 0x84
  { 0x21, 0x75, 0x55, 0x54, 0x7C, 0x78, 0x40, 0x00 }, // 0x85
  { 0x20, 0x74, 0x57, 0x57, 0x7C, 0x78, 0x40, 0x00 }, // 0x86
  { 0x18, 0x3C, 0xA4, 0xA4, 0xE4, 0x40, 0x00, 0x00 }, // 0x87
  { 0x02, 0x3B, 0x7D, 0x55, 0x55, 0x5D, 0x1B, 0x02 }, // 0x88
  { 0x39, 0x7D, 0x54, 0x54, 0x5D, 0x19, 0x00, 0x00 }, // 0x89
  { 0x39, 0x7D, 0x55, 0x54, 0x5C, 0x18, 0x00, 0x00 }, // 0x8A
  { 0x01, 0x45, 0x7C, 0x7C, 0x41, 0x01, 0x00, 0x00 }, // 0x8B
  { 0x02, 0x03, 0x45, 0x7D, 0x7D, 0x43, 0x02, 0x00 }, // 0x8C
  { 0x01, 0x45, 0x7D, 0x7C, 0x40, 0x00, 0x00, 0x00 }, // 0x8D
  { 0x79, 0x7D, 0x16, 0x12, 0x16, 0x7D, 0x79, 0x00 }, // 0x8E
  { 0x70, 0x78, 0x2B, 0x2B, 0x78, 0x70, 0x00, 0x00 }, // 0x8F
  { 0x44, 0x7C, 0x7C, 0x55, 0x55, 0x45, 0x00, 0x00 }, // 0x90
  { 0x20, 0x74, 0x54, 0x54, 0x7C, 0x7C, 0x54, 0x54 }, // 0x91
  { 0x7C, 0x7E, 0x0B, 0x09, 0x7F, 0x7F, 0x49, 0x00 }, // 0x92
  { 0x32, 0x7B, 0x49, 0x49, 0x7B, 0x32, 0x00, 0x00 }, // 0x93
  { 0x32, 0x7A, 0x48, 0x48, 0x7A, 0x32, 0x00, 0x00 }, // 0x94
  { 0x32, 0x7A, 0x4A, 0x48, 0x78, 0x30, 0x00, 0x00 }, // 0x95
  { 0x3A, 0x7B, 0x41, 0x41, 0x7B, 0x7A, 0x40, 0x00 }, // 0x96
  { 0x3A, 0x7A, 0x42, 0x40, 0x78, 0x78, 0x40, 0x00 }, // 0x97
  { 0x9A, 0xBA, 0xA0, 0xA0, 0xFA, 0x7A, 0x00, 0x00 }, // 0x98
  { 0x01, 0x19, 0x3C, 0x66, 0x66, 0x3C, 0x19, 0x01 }, // 0x99
  { 0x3D, 0x7D, 0x40, 0x40, 0x7D, 0x3D, 0x00, 0x00 }, // 0x9A
  { 0x18, 0x3C, 0x24, 0xE7, 0xE7, 0x24, 0x24, 0x00 }, // 0x9B
  { 0x68, 0x7E, 0x7F, 0x49, 0x43, 0x66, 0x20, 0x00 }, // 0x9C
  { 0x2B, 0x2F, 0xFC, 0xFC, 0x2F, 0x2B, 0x00, 0x00 }, // 0x9D
  { 0xFF, 0xFF, 0x09, 0x09, 0x2F, 0xF6, 0xF8, 0xA0 }, // 0x9E
  { 0x40, 0xC0, 0x88, 0xFE, 0x7F, 0x09, 0x03, 0x02 }, // 0x9F
  { 0x20, 0x74, 0x54, 0x55, 0x7D, 0x79, 0x40, 0x00 }, // 0xA0
  { 0x00, 0x44, 0x7D, 0x7D, 0x41, 0x00, 0x00, 0x00 }, // 0xA1
  { 0x30, 0x78, 0x48, 0x4A, 0x7A, 0x32, 0x00, 0x00 }, // 0xA2
  { 0x38, 0x78, 0x40, 0x42, 0x7A, 0x7A, 0x40, 0x00 }, // 0xA3
  { 0x7A, 0x7A, 0x0A, 0x0A, 0x7A, 0x70, 0x00, 0x00 }, // 0xA4
  { 0x7D, 0x7D, 0x19, 0x31, 0x7D, 0x7D, 0x00, 0x00 }, // 0xA5
  { 0x00, 0x26, 0x2F, 0x29, 0x2F, 0x2F, 0x28, 0x00 }, // 0xA6
  { 0x00, 0x26, 0x2F, 0x29, 0x2F, 0x26, 0x00, 0x00 }, // 0xA7
  { 0x30, 0x78, 0x4D, 0x45, 0x60, 0x20, 0x00, 0x00 }, // 0xA8
  { 0x38, 0x38, 0x08, 0x08, 0x08, 0x08, 0x00, 0x00 }, // 0xA9
  { 0x08, 0x08, 0x08, 0x08, 0x38, 0x38, 0x00, 0x00 }, // 0xAA
  { 0x4F, 0x6F, 0x30, 0x18, 0xCC, 0xEE, 0xBB, 0x91 }, // 0xAB
  { 0x4F, 0x6F, 0x30, 0x18, 0x6C, 0x76, 0xFB, 0xF9 }, // 0xAC
  { 0x00, 0x00, 0x00, 0x7B, 0x7B, 0x00, 0x00, 0x00 }, // 0xAD
  { 0x08, 0x1C, 0x36, 0x22, 0x08, 0x1C, 0x36, 0x22 }, // 0xAE
  { 0x22, 0x36, 0x1C, 0x08, 0x22, 0x36, 0x1C, 0x08 }, // 0xAF
  { 0xAA, 0x00, 0x55, 0x00, 0xAA, 0x00, 0x55, 0x00 }, // 0xB0
  { 0xAA, 0x55, 0xAA, 0x55, 0xAA, 0x55, 0xAA, 0x55 }, // 0xB1
  { 0xDD, 0xFF, 0xAA, 0x77, 0xDD, 0xAA, 0xFF, 0x77 }, // 0xB2
  { 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00 }, // 0xB3
  { 0x10, 0x10, 0x10, 0xFF, 0xFF, 0x00, 0x00, 0x00 }, // 0xB4
  { 0x14, 0x14, 0x14, 0xFF, 0xFF, 0x00, 0x00, 0x00 }, // 0xB5
  { 0x10, 0x10, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0x00 }, // 0xB6
  { 0x10, 0x10, 0xF0, 0xF0, 0x10, 0xF0, 0xF0, 0x00 }, // 0xB7
  { 0x14, 0x14, 0x14, 0xFC, 0xFC, 0x00, 0x00, 0x00 }, // 0xB8
  { 0x14, 0x14, 0xF7, 0xF7, 0x00, 0xFF, 0xFF, 0x00 }, // 0xB9
  { 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0x00 }, // 0xBA
  { 0x14, 0x14, 0xF4, 0xF4, 0x04, 0xFC, 0xFC, 0x00 }, // 0xBB
  { 0x14, 0x14, 0x17, 0x17, 0x10, 0x1F, 0x1F, 0x00 }, // 0xBC
  { 0x10, 0x10, 0x1F, 0x1F, 0x10, 0x1F, 0x1F, 0x00 }, // 0xBD
  { 0x14, 0x14, 0x14, 0x1F, 0x1F, 0x00, 0x00, 0x00 }, // 0xBE
  { 0x10, 0x10, 0x10, 0xF0, 0xF0, 0x00, 0x00, 0x00 }, // 0xBF
  { 0x00, 0x00, 0x00, 0x1F, 0x1F, 0x10, 0x10, 0x10 }, // 0xC0
  { 0x10, 0x10, 0x10, 0x1F, 0x1F, 0x10, 0x10, 0x10 }, // 0xC1
  { 0x10, 0x10, 0x10, 0xF0, 0xF0, 0x10, 0x10, 0x10 }, // 0xC2
  { 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x10, 0x10, 0x10 }, // 0xC3
  { 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10 }, // 0xC4
  { 0x10, 0x10, 0x10, 0xFF, 0xFF, 0x10, 0x10, 0x10 }, // 0xC5
  { 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x14, 0x14, 0x14 }, // 0xC6
  { 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0x10 }, // 0xC7
  { 0x00, 0x00, 0x1F, 0x1F, 0x10, 0x17, 0x17, 0x14 }, // 0xC8
  { 0x00, 0x00, 0xFC, 0xFC, 0x04, 0xF4, 0xF4, 0x14 }, // 0xC9
  { 0x14, 0x14, 0x17, 0x17, 0x10, 0x17, 0x17, 0x14 }, // 0xCA
  { 0x14, 0x14, 0xF4, 0xF4, 0x04, 0xF4, 0xF4, 0x14 }, // 0xCB
  { 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xF7, 0xF7, 0x14 }, // 0xCC
  { 0x14, 0x14, 0x14, 0x14, 0x14, 0x14, 0x14, 0x14 }, // 0xCD
  { 0x14, 0x14, 0xF7, 0xF7, 0x00, 0xF7, 0xF7, 0x14 }, // 0xCE
  { 0x14, 0x14, 0x14, 0x17, 0x17, 0x14, 0x14, 0x14 }, // 0xCF
  { 0x10, 0x10, 0x1F, 0x1F, 0x10, 0x1F, 0x1F, 0x10 }, // 0xD0
  { 0x14, 0x14, 0x14, 0xF4, 0xF4, 0x14, 0x14, 0x14 }, // 0xD1
  { 0x10, 0x10, 0xF0, 0xF0, 0x10, 0xF0, 0xF0, 0x10 }, // 0xD2
  { 0x00, 0x00, 0x1F, 0x1F, 0x10, 0x1F, 0x1F, 0x10 }, // 0xD3
  { 0x00, 0x00, 0x00, 0x1F, 0x1F, 0x14, 0x14, 0x14 }, // 0xD4
  { 0x00, 0x00, 0x00, 0xFC, 0xFC, 0x14, 0x14, 0x14 }, // 0xD5
  { 0x00, 0x00, 0xF0, 0xF0, 0x10, 0xF0, 0xF0, 0x10 }, // 0xD6
  { 0x10, 0x10, 0xFF, 0xFF, 0x10, 0xFF, 0xFF, 0x10 }, // 0xD7
  { 0x14, 0x14, 0x14, 0xFF, 0xFF, 0x14, 0x14, 0x14 }, // 0xD8
  { 0x10, 0x10, 0x10, 0x1F, 0x1F, 0x00, 0x00, 0x00 }, // 0xD9
  { 0x00, 0x00, 0x00, 0xF0, 0xF0, 0x10, 0x10, 0x10 }, // 0xDA
  { 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF }, // 0xDB
  { 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0 }, // 0xDC
  { 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00 }, // 0xDD
  { 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF }, // 0xDE
  { 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F }, // 0xDF
  { 0x38, 0x7C, 0x44, 0x6C, 0x38, 0x6C, 0x44, 0x00 }, // 0xE0
  { 0xFC, 0xFE, 0x2A, 0x2A, 0x3E, 0x14, 0x00, 0x00 }, // 0xE1
  { 0x7E, 0x7E, 0x02, 0x02, 0x06, 0x06, 0x00, 0x00 }, // 0xE2
  { 0x02, 0x7E, 0x7E, 0x02, 0x7E, 0x7E, 0x02, 0x00 }, // 0xE3
  { 0x63, 0x77, 0x5D, 0x49, 0x63, 0x63, 0x00, 0x00 }, // 0xE4
  { 0x38, 0x7C, 0x44, 0x7C, 0x3C, 0x04, 0x04, 0x00 }, // 0xE5
  { 0x80, 0xFE, 0x7E, 0x20, 0x20, 0x3E, 0x1E, 0x00 }, // 0xE6
  { 0x04, 0x06, 0x02, 0x7E, 0x7C, 0x06, 0x02, 0x00 }, // 0xE7
  { 0x99, 0xBD, 0xE7, 0xE7, 0xBD, 0x99, 0x00, 0x00 }, // 0xE8
  { 0x1C, 0x3E, 0x6B, 0x49, 0x6B, 0x3E, 0x1C, 0x00 }, // 0xE9
  { 0x4C, 0x7E, 0x73, 0x01, 0x73, 0x7E, 0x4C, 0x00 }, // 0xEA
  { 0x30, 0x78, 0x4A, 0x4F, 0x7D, 0x39, 0x00, 0x00 }, // 0xEB
  { 0x18, 0x3C, 0x24, 0x3C, 0x3C, 0x24, 0x3C, 0x18 }, // 0xEC
  { 0x98, 0xFC, 0x64, 0x3C, 0x3E, 0x27, 0x3D, 0x18 }, // 0xED
  { 0x1C, 0x3E, 0x6B, 0x49, 0x49, 0x00, 0x00, 0x00 }, // 0xEE
  { 0x7E, 0x7F, 0x01, 0x01, 0x7F, 0x7E, 0x00, 0x00 }, // 0xEF
  { 0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x00, 0x00 }, // 0xF0
  { 0x44, 0x44, 0x5F, 0x5F, 0x44, 0x44, 0x00, 0x00 }, // 0xF1
  { 0x40, 0x51, 0x5B, 0x4E, 0x44, 0x40, 0x00, 0x00 }, // 0xF2
  { 0x40, 0x44, 0x4E, 0x5B, 0x51, 0x40, 0x00, 0x00 }, // 0xF3
  { 0x00, 0x00, 0x00, 0xFE, 0xFF, 0x01, 0x07, 0x06 }, // 0xF4
  { 0x60, 0xE0, 0x80, 0xFF, 0x7F, 0x00, 0x00, 0x00 }, // 0xF5
  { 0x08, 0x08, 0x6B, 0x6B, 0x08, 0x08, 0x00, 0x00 }, // 0xF6
  { 0x24, 0x36, 0x12, 0x36, 0x24, 0x36, 0x12, 0x00 }, // 0xF7
  { 0x00, 0x06, 0x0F, 0x09, 0x0F, 0x06, 0x00, 0x00 }, // 0xF8
  { 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00 }, // 0xF9
  { 0x00, 0x00, 0x00, 0x10, 0x10, 0x00, 0x00, 0x00 }, // 0xFA
  { 0x10, 0x30, 0x70, 0xC0, 0xFF, 0xFF, 0x01, 0x01 }, // 0xFB
  { 0x00, 0x1F, 0x1F, 0x01, 0x1F, 0x1E, 0x00, 0x00 }, // 0xFC
  { 0x00, 0x19, 0x1D, 0x17, 0x12, 0x00, 0x00, 0x00 }, // 0xFD
  { 0x00, 0x00, 0x3C, 0x3C, 0x3C, 0x3C, 0x00, 0x00 }, // 0xFE
  { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, // 0xFF
};
const unsigned char font8x8_basic[128][8] = 	{//	Font 8x8 Horisontal
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0000 (nul)
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0001
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0002
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0003
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0004
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0005
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0006
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0007
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0008
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0009
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+000A
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+000B
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+000C
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+000D
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+000E
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+000F
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0010
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0011
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0012
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0013
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0014
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0015
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0016
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0017
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0018
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0019
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+001A
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+001B
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+001C
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+001D
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+001E
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+001F
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0020 (space)
    { 0x18, 0x3C, 0x3C, 0x18, 0x18, 0x00, 0x18, 0x00},   // U+0021 (!)
    { 0x36, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0022 (")
    { 0x36, 0x36, 0x7F, 0x36, 0x7F, 0x36, 0x36, 0x00},   // U+0023 (#)
    { 0x0C, 0x3E, 0x03, 0x1E, 0x30, 0x1F, 0x0C, 0x00},   // U+0024 ($)
    { 0x00, 0x63, 0x33, 0x18, 0x0C, 0x66, 0x63, 0x00},   // U+0025 (%)
    { 0x1C, 0x36, 0x1C, 0x6E, 0x3B, 0x33, 0x6E, 0x00},   // U+0026 (&)
    { 0x06, 0x06, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0027 (')
    { 0x18, 0x0C, 0x06, 0x06, 0x06, 0x0C, 0x18, 0x00},   // U+0028 (()
    { 0x06, 0x0C, 0x18, 0x18, 0x18, 0x0C, 0x06, 0x00},   // U+0029 ())
    { 0x00, 0x66, 0x3C, 0xFF, 0x3C, 0x66, 0x00, 0x00},   // U+002A (*)
    { 0x00, 0x0C, 0x0C, 0x3F, 0x0C, 0x0C, 0x00, 0x00},   // U+002B (+)
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0C, 0x06},   // U+002C (,)
    { 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00},   // U+002D (-)
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0C, 0x00},   // U+002E (.)
    { 0x60, 0x30, 0x18, 0x0C, 0x06, 0x03, 0x01, 0x00},   // U+002F (/)
    { 0x3E, 0x63, 0x73, 0x7B, 0x6F, 0x67, 0x3E, 0x00},   // U+0030 (0)
    { 0x0C, 0x0E, 0x0C, 0x0C, 0x0C, 0x0C, 0x3F, 0x00},   // U+0031 (1)
    { 0x1E, 0x33, 0x30, 0x1C, 0x06, 0x33, 0x3F, 0x00},   // U+0032 (2)
    { 0x1E, 0x33, 0x30, 0x1C, 0x30, 0x33, 0x1E, 0x00},   // U+0033 (3)
    { 0x38, 0x3C, 0x36, 0x33, 0x7F, 0x30, 0x78, 0x00},   // U+0034 (4)
    { 0x3F, 0x03, 0x1F, 0x30, 0x30, 0x33, 0x1E, 0x00},   // U+0035 (5)
    { 0x1C, 0x06, 0x03, 0x1F, 0x33, 0x33, 0x1E, 0x00},   // U+0036 (6)
    { 0x3F, 0x33, 0x30, 0x18, 0x0C, 0x0C, 0x0C, 0x00},   // U+0037 (7)
    { 0x1E, 0x33, 0x33, 0x1E, 0x33, 0x33, 0x1E, 0x00},   // U+0038 (8)
    { 0x1E, 0x33, 0x33, 0x3E, 0x30, 0x18, 0x0E, 0x00},   // U+0039 (9)
    { 0x00, 0x0C, 0x0C, 0x00, 0x00, 0x0C, 0x0C, 0x00},   // U+003A (:)
    { 0x00, 0x0C, 0x0C, 0x00, 0x00, 0x0C, 0x0C, 0x06},   // U+003B (;)
    { 0x18, 0x0C, 0x06, 0x03, 0x06, 0x0C, 0x18, 0x00},   // U+003C (<)
    { 0x00, 0x00, 0x3F, 0x00, 0x00, 0x3F, 0x00, 0x00},   // U+003D (=)
    { 0x06, 0x0C, 0x18, 0x30, 0x18, 0x0C, 0x06, 0x00},   // U+003E (>)
    { 0x1E, 0x33, 0x30, 0x18, 0x0C, 0x00, 0x0C, 0x00},   // U+003F (?)
    { 0x3E, 0x63, 0x7B, 0x7B, 0x7B, 0x03, 0x1E, 0x00},   // U+0040 (@)
    { 0x0C, 0x1E, 0x33, 0x33, 0x3F, 0x33, 0x33, 0x00},   // U+0041 (A)
    { 0x3F, 0x66, 0x66, 0x3E, 0x66, 0x66, 0x3F, 0x00},   // U+0042 (B)
    { 0x3C, 0x66, 0x03, 0x03, 0x03, 0x66, 0x3C, 0x00},   // U+0043 (C)
    { 0x1F, 0x36, 0x66, 0x66, 0x66, 0x36, 0x1F, 0x00},   // U+0044 (D)
    { 0x7F, 0x46, 0x16, 0x1E, 0x16, 0x46, 0x7F, 0x00},   // U+0045 (E)
    { 0x7F, 0x46, 0x16, 0x1E, 0x16, 0x06, 0x0F, 0x00},   // U+0046 (F)
    { 0x3C, 0x66, 0x03, 0x03, 0x73, 0x66, 0x7C, 0x00},   // U+0047 (G)
    { 0x33, 0x33, 0x33, 0x3F, 0x33, 0x33, 0x33, 0x00},   // U+0048 (H)
    { 0x1E, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x1E, 0x00},   // U+0049 (I)
    { 0x78, 0x30, 0x30, 0x30, 0x33, 0x33, 0x1E, 0x00},   // U+004A (J)
    { 0x67, 0x66, 0x36, 0x1E, 0x36, 0x66, 0x67, 0x00},   // U+004B (K)
    { 0x0F, 0x06, 0x06, 0x06, 0x46, 0x66, 0x7F, 0x00},   // U+004C (L)
    { 0x63, 0x77, 0x7F, 0x7F, 0x6B, 0x63, 0x63, 0x00},   // U+004D (M)
    { 0x63, 0x67, 0x6F, 0x7B, 0x73, 0x63, 0x63, 0x00},   // U+004E (N)
    { 0x1C, 0x36, 0x63, 0x63, 0x63, 0x36, 0x1C, 0x00},   // U+004F (O)
    { 0x3F, 0x66, 0x66, 0x3E, 0x06, 0x06, 0x0F, 0x00},   // U+0050 (P)
    { 0x1E, 0x33, 0x33, 0x33, 0x3B, 0x1E, 0x38, 0x00},   // U+0051 (Q)
    { 0x3F, 0x66, 0x66, 0x3E, 0x36, 0x66, 0x67, 0x00},   // U+0052 (R)
    { 0x1E, 0x33, 0x07, 0x0E, 0x38, 0x33, 0x1E, 0x00},   // U+0053 (S)
    { 0x3F, 0x2D, 0x0C, 0x0C, 0x0C, 0x0C, 0x1E, 0x00},   // U+0054 (T)
    { 0x33, 0x33, 0x33, 0x33, 0x33, 0x33, 0x3F, 0x00},   // U+0055 (U)
    { 0x33, 0x33, 0x33, 0x33, 0x33, 0x1E, 0x0C, 0x00},   // U+0056 (V)
    { 0x63, 0x63, 0x63, 0x6B, 0x7F, 0x77, 0x63, 0x00},   // U+0057 (W)
    { 0x63, 0x63, 0x36, 0x1C, 0x1C, 0x36, 0x63, 0x00},   // U+0058 (X)
    { 0x33, 0x33, 0x33, 0x1E, 0x0C, 0x0C, 0x1E, 0x00},   // U+0059 (Y)
    { 0x7F, 0x63, 0x31, 0x18, 0x4C, 0x66, 0x7F, 0x00},   // U+005A (Z)
    { 0x1E, 0x06, 0x06, 0x06, 0x06, 0x06, 0x1E, 0x00},   // U+005B ([)
    { 0x03, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x40, 0x00},   // U+005C (\)
    { 0x1E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1E, 0x00},   // U+005D (])
    { 0x08, 0x1C, 0x36, 0x63, 0x00, 0x00, 0x00, 0x00},   // U+005E (^)
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF},   // U+005F (_)
    { 0x0C, 0x0C, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+0060 (`)
    { 0x00, 0x00, 0x1E, 0x30, 0x3E, 0x33, 0x6E, 0x00},   // U+0061 (a)
    { 0x07, 0x06, 0x06, 0x3E, 0x66, 0x66, 0x3B, 0x00},   // U+0062 (b)
    { 0x00, 0x00, 0x1E, 0x33, 0x03, 0x33, 0x1E, 0x00},   // U+0063 (c)
    { 0x38, 0x30, 0x30, 0x3e, 0x33, 0x33, 0x6E, 0x00},   // U+0064 (d)
    { 0x00, 0x00, 0x1E, 0x33, 0x3f, 0x03, 0x1E, 0x00},   // U+0065 (e)
    { 0x1C, 0x36, 0x06, 0x0f, 0x06, 0x06, 0x0F, 0x00},   // U+0066 (f)
    { 0x00, 0x00, 0x6E, 0x33, 0x33, 0x3E, 0x30, 0x1F},   // U+0067 (g)
    { 0x07, 0x06, 0x36, 0x6E, 0x66, 0x66, 0x67, 0x00},   // U+0068 (h)
    { 0x0C, 0x00, 0x0E, 0x0C, 0x0C, 0x0C, 0x1E, 0x00},   // U+0069 (i)
    { 0x30, 0x00, 0x30, 0x30, 0x30, 0x33, 0x33, 0x1E},   // U+006A (j)
    { 0x07, 0x06, 0x66, 0x36, 0x1E, 0x36, 0x67, 0x00},   // U+006B (k)
    { 0x0E, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x1E, 0x00},   // U+006C (l)
    { 0x00, 0x00, 0x33, 0x7F, 0x7F, 0x6B, 0x63, 0x00},   // U+006D (m)
    { 0x00, 0x00, 0x1F, 0x33, 0x33, 0x33, 0x33, 0x00},   // U+006E (n)
    { 0x00, 0x00, 0x1E, 0x33, 0x33, 0x33, 0x1E, 0x00},   // U+006F (o)
    { 0x00, 0x00, 0x3B, 0x66, 0x66, 0x3E, 0x06, 0x0F},   // U+0070 (p)
    { 0x00, 0x00, 0x6E, 0x33, 0x33, 0x3E, 0x30, 0x78},   // U+0071 (q)
    { 0x00, 0x00, 0x3B, 0x6E, 0x66, 0x06, 0x0F, 0x00},   // U+0072 (r)
    { 0x00, 0x00, 0x3E, 0x03, 0x1E, 0x30, 0x1F, 0x00},   // U+0073 (s)
    { 0x08, 0x0C, 0x3E, 0x0C, 0x0C, 0x2C, 0x18, 0x00},   // U+0074 (t)
    { 0x00, 0x00, 0x33, 0x33, 0x33, 0x33, 0x6E, 0x00},   // U+0075 (u)
    { 0x00, 0x00, 0x33, 0x33, 0x33, 0x1E, 0x0C, 0x00},   // U+0076 (v)
    { 0x00, 0x00, 0x63, 0x6B, 0x7F, 0x7F, 0x36, 0x00},   // U+0077 (w)
    { 0x00, 0x00, 0x63, 0x36, 0x1C, 0x36, 0x63, 0x00},   // U+0078 (x)
    { 0x00, 0x00, 0x33, 0x33, 0x33, 0x3E, 0x30, 0x1F},   // U+0079 (y)
    { 0x00, 0x00, 0x3F, 0x19, 0x0C, 0x26, 0x3F, 0x00},   // U+007A (z)
    { 0x38, 0x0C, 0x0C, 0x07, 0x0C, 0x0C, 0x38, 0x00},   // U+007B ({)
    { 0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x00},   // U+007C (|)
    { 0x07, 0x0C, 0x0C, 0x38, 0x0C, 0x0C, 0x07, 0x00},   // U+007D (})
    { 0x6E, 0x3B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},   // U+007E (~)
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}    // U+007F
};



void TimingDelayDec(void) 										{
 if (TimingDelay			!=0x00) TimingDelay--;
 if (!led_count) {led_count=500; GPIOB->ODR ^=1;}
 if (!mss) {mss=500;tic=1;}
 led_count--;mss--;
 }

void TIM17_IRQHandler(void)										{
		if (TIM17->SR & TIM_SR_UIF) {
					TimingDelayDec();
  				TIM17->SR &=(~TIM_SR_UIF);
		}
}	
void delay_ms (uint16_t DelTime) 							{
    TimingDelay=DelTime;
  while(TimingDelay!= 0x00);
}



void SPI_Write(uint8_t value, uint8_t cmd) 		{//WriteSingle
while (!(SPI1->SR & SPI_SR_TXE)){};	 
SPI1->DR =cmd<<8 | value;
while (SPI1->SR & SPI_SR_BSY){};
}
void CMD_MAX7219(uint8_t value, uint8_t cmd) 	{
uint8_t it;
	CS_L();
	for (it=0;it<QNT;it++) {
	SPI_Write(value, cmd);delay_ms(1); 
	}
	CS_H();
}

//			=================PART MAX7219 COMMAND======================
void CMD_POW_OFF(uint8_t cm) 									{	//Disable (quantity)  
uint8_t it;
	for (it=0;it<=cm;it++)	{SPI_Write(REG_SHUTDOWN,0);}	//Off one MAX7219
}
void CMD_POW_ON	(uint8_t cm) 									{	//ENABLE (quantity)
uint8_t it;
	for (it=0;it<=cm;it++)	{SPI_Write(REG_SHUTDOWN,1);}	//On one MAX7219
}

void CMD_SKIP(uint8_t q_m) 										{	//Skip (quantity)
uint8_t it;
	for (it=0;it<=q_m;it++)	{SPI_Write(0,0);}	//Skip one MAX7219
}
void CMD_CLR(uint8_t q_m,uint8_t col) 				{	//Clear
uint8_t it;
	for (it=0;it<=q_m;it++)	{SPI_Write(col,0x00);}	//clr one col MAX7219
}
void CMD_CLR_X_Q(uint8_t x,uint8_t q) 				{	//
uint8_t yt,y;
	if (x>QNT) return;
	
	for(y=1;y<=8;y++) {
		CS_L();
		for(yt=1;yt<=QNT;yt++) {
			if ((yt==x) || ((yt>x)&&(yt<x+q)))	{SPI_Write(y,0x00);}
			else 																{SPI_Write(0,0x00);}
		}
		CS_H();
	}
}



void CMD_WR_X_Y_Q(uint8_t x,uint8_t y, uint8_t q,uint8_t val) {
uint8_t yt;
	if (x>QNT) return;
	CS_L();
		for(yt=1;yt<=QNT;yt++) {
			if ((yt==x) || ((yt>x)&&(yt<x+q)))	{SPI_Write(y,val);}
			else 																{SPI_Write(0,0x00);}
		}
	CS_H();
}



uint8_t REV_Byte(uint8_t b) 																	{	// Revert byte for horisontal font8x8_basic[128][8]
    
   b = (b & 0xF0) >> 4 | (b & 0x0F) << 4;
   b = (b & 0xCC) >> 2 | (b & 0x33) << 2;
   b = (b & 0xAA) >> 1 | (b & 0x55) << 1;
   return b;
}


void CMD_WR_X_Y(uint8_t x,uint8_t y, uint8_t val) 						{	// Write XY command
uint8_t yt;
	if ((x>(QNT*8))|| (y>8)) return;
	CS_L();
		for(yt=1;yt<=QNT;yt++) {
			if (yt==x)	{SPI_Write(y,REV_Byte(val));}
			else 				{SPI_Write(0,0x00);}
		}
	CS_H();
}


//			==================BUF CMD==================================
void CLR_BUF(void)														{
for (uint8_t xx=0;xx<=15;xx++)	{
BUF[xx]=0x00;
}
}
void WR_BUF_STR(char *z,uint8_t x )						{
	uint8_t xx=0;
	while (*z)	{
	BUF[x+xx]=*z;
		z++;x++;	
	}
	
}
void WR_BUF_DEC(uint32_t value,uint8_t x)			{
	
	uint8_t i=1,d=0;
	unsigned char text[10];
	do { 
    if (value >=10) {d = value % 10;text[i]=d+'0';value /= 10;}
		else 						{text[i]=value+'0';value=0;}
 		i++;
  }
	while(value);	i--;d=0;
	do {	
		BUF[d+x]=text[i];
		i--;d++;
	}
	while(i);
}




void PRINT_BUF(void)													{
	for (uint8_t cc=0;cc<8;cc++) {
	CS_L();
		for(uint8_t yt=1;yt<=QNT;yt++) {
			SPI_Write(cc+1,REV_Byte(font8x8_basic[BUF[yt]][cc]));}
	CS_H();
}
	}
void BUF_ROLL_RIGHT(uint8_t str, uint8_t end)	{//(uint8_t step)
uint8_t temp;
temp=BUF[str];	
for(uint8_t cc=str;cc<=end;cc++) {
	
if (cc<end)	{BUF[cc]=BUF[cc+1];}
else 				{BUF[cc]=temp;}
}	
}
void BUF_ROLL_LEFT (uint8_t str, uint8_t end)	{ //(uint8_t step)
uint8_t temp;
temp=BUF[end];
	for(uint8_t cc=end;cc>=str;cc--) {
		
if (cc>str)	{BUF[cc]=BUF[cc-1];}
else 			{BUF[cc]=temp;}
	
}

}


void BUF_LED_BUF(void) 												{
for(uint8_t cy=0;cy<8;cy++) {
for(uint8_t cx=0;cx<QNT;cx++) {
LED_BUF[cx+cy*QNT]=REV_Byte(font8x8_basic[BUF[cx]][cy]);
}
	
}
}
//			===============LED_BUF=====================
void FONT_8x5_STR(char *z,uint8_t x )					{
if (x<1) return;
	x-=1;
	while (*z)	{
	for(uint8_t cc=0;cc<5;cc++) {
		LED_BUF[x] = font[(*z - 32)*5+cc];x++;
 	  if(cc == 4) {LED_BUF[x] = 0x00;x++;}
  }
			z++;	
	}
}
void FONT_8x5_DEC(uint32_t value,uint8_t x)		{
	
	uint8_t i=1,d=0;
	if (x<1) return;
	x-=1;
	unsigned char text[10];
	do { 
    if (value >=10) {d = value % 10;text[i]=d+'0';value /= 10;}
		else 						{text[i]=value+'0';value=0;}
 		i++;
  }
	while(value);	i--;d=0;
	do {
		for(uint8_t cc=0;cc<5;cc++) {	
			LED_BUF[x]=font[(text[i] - 32)*5+cc];x++;
			if(cc == 4) {LED_BUF[x] = 0x00;x++;}
		}
		i--;x++;
	}	while(i);
}
void FONT_8x8_STR(char *z,uint8_t x )					{
if (x<1) return;
	x-=1;
	while (*z)	{
	for(uint8_t cc=0;cc<8;cc++) { LED_BUF[x] = font_[*z][cc];x++;}
	z++;	
	}
}
void FONT_8x8_DEC(uint32_t value,uint8_t x)		{
	
	uint8_t i=1,d=0;
	if (x<1) return;
	x-=1;
	unsigned char text[10];
	do { 
    if (value >=10) {d = value % 10;text[i]=d+'0';value /= 10;}
		else 						{text[i]=value+'0';value=0;}
 		i++;
  }
	while(value);	i--;d=0;
	do {
	 for(uint8_t cc=0;cc<8;cc++) {LED_BUF[x]=font_[text[i]][cc];x++; }
	 i--;x++;
	} while(i);
}

void LED_BUF_LEFT(uint8_t str, uint8_t end)		{
uint8_t temp;
temp=LED_BUF[end];
	for(uint8_t cc=end;cc>=str;cc--) {
		if (cc>str)	{LED_BUF[cc]=LED_BUF[cc-1];}
		else 				{LED_BUF[cc]=temp;}
	}
}
void LED_BUF_RIGHT(uint8_t str, uint8_t end)	{
uint8_t temp;
temp=LED_BUF[str];	
for(uint8_t cc=str;cc<=end;cc++) {
	
if (cc<end)	{LED_BUF[cc]=LED_BUF[cc+1];}
else 				{LED_BUF[cc]=temp;}
}	
}
void PRINT_LED_BUF(void)											{
	uint8_t temp_buf=0,xx,yt,cc;
	for (cc=0;cc<8;cc++) {
	CS_L();
		for(yt=0;yt<QNT;yt++) {
		if(LED_BUF[yt*8+0]&	1<<cc) {temp_buf |= 0x80;}
		if(LED_BUF[yt*8+1]&	1<<cc) {temp_buf |= 0x40;}
		if(LED_BUF[yt*8+2]&	1<<cc) {temp_buf |= 0x20;}
		if(LED_BUF[yt*8+3]&	1<<cc) {temp_buf |= 0x10;}
		if(LED_BUF[yt*8+4]&	1<<cc) {temp_buf |= 0x8;}
		if(LED_BUF[yt*8+5]&	1<<cc) {temp_buf |= 0x4;}
		if(LED_BUF[yt*8+6]&	1<<cc) {temp_buf |= 0x2;}
		if(LED_BUF[yt*8+7]&	1<<cc) {temp_buf |= 0x1;}
		SPI_Write(cc+1,	temp_buf);
			temp_buf=0;
		}
	CS_H();
}
	}
//			==================FULL DISPLAY COMMAND=====================
void CMD_BRIGHT(uint8_t br)										{	//Full Display CONTRAST CMD (0x0....0x0f)
uint8_t it;
	if (br>0x0f) return;
		CS_L();
	for (it=0;it<QNT;it++) {
	SPI_Write(REG_BRIGHT,br); 
	}
	CS_H();
}
void CMD_DECODE(uint8_t br)										{	//Full Display DECODE (Should be 0 for Matrix LED)
uint8_t it;
	CS_L();
	for (it=0;it<QNT;it++) {
	SPI_Write(REG_DECODE,br); 
	}
	CS_H();
}
void CMD_SCAN(uint8_t sc)											{	//Full Display SCAN parameter (0x0...0x7)
uint8_t it;
	if (sc>7) return;
	CS_L();
	for (it=0;it<QNT;it++) {
	SPI_Write(REG_SCAN,sc); 
	}
	CS_H();
}
void CMD_TEST(uint8_t tst)										{	//Enable/Disable full Display TEST (ENABLE - 1, DISABLE =0)
uint8_t it;
	if (tst>1) tst=1;
	CS_L();
	for (it=0;it<QNT;it++) {
	SPI_Write(REG_TEST,tst); 
	}
	CS_H();
}
void CMD_SHUTDOWN(uint8_t shdwn)							{ //Enable/Disable full Display, (ENABLE - 1, DISABLE =0)
uint8_t it;
	if (shdwn>1) shdwn=1;
	CS_L();
	for (it=0;it<QNT;it++) {
	SPI_Write(REG_SHUTDOWN,shdwn); 
	}
	CS_H();
}

void CLR_SCR(void) 														{
uint8_t it,jt;
	
for (jt=1;jt<=8;jt++){
		CS_L();
		for (it=0;it<QNT;it++) {SPI_Write(jt,0x00);}
    CS_H();
    }
}
//------------------------------LED ------------------------------
void LED_Init(void)														{// MAX7219 Init
			CS();
			CMD_SHUTDOWN(0x00);delay_ms(1);
			CLR_SCR();
			CMD_SHUTDOWN(0x01);delay_ms(1);
			CMD_TEST(ON);delay_ms(1);
			CMD_SCAN(0x07);delay_ms(1);
			CMD_DECODE(OFF);delay_ms(1);
			CMD_BRIGHT(0x04);delay_ms(1);
			delay_ms(500);
			CMD_TEST(OFF);
			
}



void LCD_PrintStr(char *s,uint8_t x_pos)			{// Print String
	uint8_t pos=0;
uint8_t size=sizeof(s);
	while (*s)  {
	for (uint8_t cc=0;cc<8;cc++) {CMD_WR_X_Y((x_pos+pos),(cc+1),font8x8_basic[*s][cc]);}	      
	s++;pos++;
  }
}
void LCD_PrintDec(long value,uint8_t x_pos) 	{// Print Dec
	
	char i=1,d=0;
	unsigned char text[10];
	do { 
    if (value >=10) {d = value % 10;text[i]=d+'0';value /= 10;}
		else 						{text[i]=value+'0';value=0;}
 		i++;
  }
	while(value);	i--;			

	do{	
		for (uint8_t cc=0;cc<8;cc++) {CMD_WR_X_Y((x_pos),(cc+1),font8x8_basic[text[i]][cc]);}
		i--;x_pos++;
	}
	while(i);
}
			
/*	
void Init_DMA (void)
{
 
  RCC->AHBENR |= RCC_AHBENR_DMA1EN; 
  SPI1->CR2 |= SPI_CR2_RXDMAEN; 
	SPI1->CR2 |= SPI_CR2_TXDMAEN;
  DMA1_Channel1->CPAR = (uint32_t) (&(SPI1_DR_8bit)); 
  DMA1_Channel1->CMAR = (uint32_t)(SPI_array); 
  DMA1_Channel1->CNDTR = 2; 
  DMA1_Channel1->CCR |= DMA_CCR_MINC | DMA_CCR_MSIZE_0 | DMA_CCR_PSIZE_0 \
                      | DMA_CCR_TEIE | DMA_CCR_TCIE ;  
  DMA1_Channel1->CCR |= DMA_CCR_EN; 
  
   NVIC_EnableIRQ(DMA1_Channel2_3_IRQn); 
  NVIC_SetPriority(DMA1_Channel2_3_IRQn,0); 
}
void DMA1_Channel2_3_IRQHandler(void)
{

}
*/

	void initial (void)													{
//---------------TIM17------------------
  RCC->APB2ENR |= RCC_APB2ENR_TIM17EN;    																			//HSI 8 MHz - 1 msek
  TIM17->PSC = 8000-1;
  TIM17->ARR = 1;
  TIM17->CR1 |= TIM_CR1_ARPE | TIM_CR1_DIR | TIM_CR1_CEN; 											// 
	TIM17->DIER |=TIM_DIER_UIE;
	NVIC_EnableIRQ (TIM17_IRQn);
	NVIC_SetPriority(TIM17_IRQn,0x05);	

//-------------------GPIOB-Blinking Led		
	RCC->AHBENR  |= RCC_AHBENR_GPIOBEN; 																					//
	GPIOB->MODER |= GPIO_MODER_MODER0_0;																					//Pb0-Out 
//----------------OE pin normal--------------------------
	RCC->AHBENR  |= RCC_AHBENR_GPIOAEN; 								//
		
	GPIOA->MODER |= GPIO_MODER_MODER3_0; 								// Out-mode
	
	
//------------------------SPI-----------------------------------
	RCC->AHBENR 		|=RCC_AHBENR_GPIOAEN;
	GPIOA->OSPEEDR 	|=GPIO_OSPEEDER_OSPEEDR4 | GPIO_OSPEEDER_OSPEEDR5 | GPIO_OSPEEDER_OSPEEDR6 | GPIO_OSPEEDER_OSPEEDR7;
	GPIOA->MODER 		|=GPIO_MODER_MODER4_0 | GPIO_MODER_MODER5_1 | GPIO_MODER_MODER6_1 | GPIO_MODER_MODER7_1; 	//Pa4 - out,Pa5..7 - Alt_mode 
	GPIOA->AFR[0] 	|=(0<<GPIO_AFRL_AFRL7_Pos) |(0<<GPIO_AFRL_AFRL6_Pos) | (0<<GPIO_AFRL_AFRL5_Pos);  // SPI - Alternative
	GPIOA->MODER 		|=GPIO_MODER_MODER4_0;
	
	RCC->APB2ENR |=RCC_APB2ENR_SPI1EN;
	SPI1->CR1 |=SPI_CR1_SSM | SPI_CR1_SSI | SPI_CR1_MSTR |  (2<<SPI_CR1_BR_Pos);  // if HSI8 - SpiSpeed (BR=2) - 1MHz
//	SPI1->CR1 |=SPI_CR1_LSBFIRST;
	SPI1->CR2 |=SPI_CR2_FRXTH;
	SPI1->CR1 |=SPI_CR1_SPE;
} 

int main(void)
{
initial();	
delay_ms(100);
LED_Init();	
CLR_BUF();	
//-----------------------------initial data----------------------------------
FONT_8x5_STR("Font_8x5", 1);//FONT_8x8_DEC(counter, 49);
FONT_8x8_STR("Font_8x8",55);//FONT_8x5_DEC(counter, 110);

while (1)  /* Main loop */
{

if(tic) {counter++;tic=0;}


LED_BUF_LEFT(50,119); 
LED_BUF_RIGHT(0,48);
delay_ms(20);
PRINT_LED_BUF();

//WR_BUF_STR("Test",1);	WR_BUF_DEC(counter,13); PRINT_BUF();
//LCD_PrintStr("Test1 ",0);
//LCD_PrintDec(counter,9);
//BUF_ROLL_RIGHT(1,11); delay_ms(100);
//BUF_ROLL_LEFT (1,11); delay_ms(100);

} // end - main loop 
} // end - Main  
	
#ifdef  USE_FULL_ASSERT
void assert_failed(uint8_t* file, uint32_t line)
{ while (1)  {  } }
#endif
